// {{ skill_name }} — Go handler (optional).
//
// Use this when your skill needs custom logic beyond the LLM prompt in SKILL.md.
// Most skills are pure markdown (prompt-only). Add code here only when needed.
//
// Contract: SkillContext → SkillResult (DEC-005)
//
// NOTE: Go runner is Phase 2. This file scaffolds the interface.

package handler

import "context"

type SkillContext struct {
	SkillName     string                 `json:"skill_name"`
	Domain        string                 `json:"domain"`
	Role          string                 `json:"role"`
	Model         string                 `json:"model"`
	SystemPrompt  string                 `json:"system_prompt"`
	InputData     map[string]interface{} `json:"input_data"`
	RoutedContext map[string]interface{} `json:"routed_context"`
	McpTools      []string               `json:"mcp_tools"`
}

type SkillResult struct {
	SkillName      string                 `json:"skill_name"`
	Success        bool                   `json:"success"`
	Output         map[string]interface{} `json:"output"`
	ReasoningTrace []string               `json:"reasoning_trace"`
	ModelUsed      string                 `json:"model_used"`
	CostUSD        float64                `json:"cost_usd"`
	LatencyMs      float64                `json:"latency_ms"`
	RouteTo        string                 `json:"route_to,omitempty"`
	ContextForNext map[string]interface{} `json:"context_for_next"`
}

func Handle(ctx context.Context, input SkillContext) (*SkillResult, error) {
	return &SkillResult{
		SkillName:      input.SkillName,
		Success:        true,
		Output:         map[string]interface{}{"message": "Handler executed", "input": input.InputData},
		ReasoningTrace: []string{},
		ModelUsed:      input.Model,
	}, nil
}
